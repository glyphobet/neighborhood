<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>
    <link rel="stylesheet" href="https://glyphobet.net/css/reset.css" type="text/css" media="all"/>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css" />
    <style>
      #map {
        background-color: white;
        position: absolute;
        width: auto;
        height: 100%;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
      }
    </style>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js"></script>
    <script>
      function onload() {
        var southMinLat = 37.70415,
            northMaxLat = 37.81075,
            westMaxLong = -122.51528,
            eastMinLong = -122.35728;

        var map = L.map('map', {
          minZoom: 13,
        }).setView([(southMinLat+northMaxLat)/2, (westMaxLong+eastMinLong)/2], 13);

        map.setMaxBounds(new L.LatLngBounds([southMinLat, westMaxLong], [northMaxLat, eastMinLong]));

        // For debugging:
        // var box = L.polygon([
        //   [southMinLat, westMaxLong], // SW
        //   [northMaxLat, westMaxLong], // NW
        //   [northMaxLat, eastMinLong], // NE
        //   [southMinLat, eastMinLong], // SE
        // ]).addTo(map);
        // box.setStyle({fill: false, weight: 1});

        // From: http://wiki.openstreetmap.org/wiki/Tiles
        // L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', { // default
        // L.tileLayer('http://{s}.www.toolserver.org/tiles/bw-mapnik/{z}/{x}/{y}.png', {  // greyscale w/red labels
        // L.tileLayer('http://a.tile.stamen.com/toner/{z}/{x}/{y}.png', {  // B&W with black ocean
        L.tileLayer('http://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {  // very subdued w/ neighborhood names
            attribution: '&copy; Map tiles by CartoDB, under CC BY 3.0. Data by OpenStreetMap, under ODbL.'
        }).addTo(map);

        var hoods = [
          "alamo square / nopa",
          "bayview",
          "bernal heights",
          "castro / upper market",
          "cole valley / ashbury hts",
          "downtown / civic / van ness",
          "excelsior / outer mission",
          "financial district",
          "glen park",
          "haight ashbury",
          "hayes valley",
          "ingleside / SFSU / CCSF",
          "inner richmond",
          "inner sunset / UCSF",
          "laurel hts / presidio",
          "lower haight",
          "lower nob hill",
          "lower pac hts",
          "marina / cow hollow",
          "mission district",
          "nob hill",
          "noe valley",
          "north beach / telegraph hill",
          "pacific heights",
          "portola district",
          "potrero hill",
          "richmond / seacliff",
          "russian hill",
          "SOMA / south beach",
          "sunset / parkside",
          "Sunset District",
          "tenderloin",
          "Treasure Island",
          "twin peaks / diamond hts",
          "USF / panhandle",
          "visitacion valley",
          "west portal / forest hill",
          "western addition",
        ];

        var overlays = {};

        for (var h in hoods) {
          var hood = hoods[h];
          var overlay = L.imageOverlay('hoods/'+hood.replace(/\//g, '-')+'.png', [[southMinLat, westMaxLong], [northMaxLat, eastMinLong]], {'opacity': 0.75}).addTo(map);
          overlays[
            hood.replace(' hts', ' heights').replace(/\w\S{1,}[a-z]/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();})
          ] = overlay;
        }
        var overlay = L.imageOverlay('hoods/no hood.png', [[southMinLat, westMaxLong], [northMaxLat, eastMinLong]], {'opacity':0.75}).addTo(map);
        overlays['No Neighborhood'] = overlay;
        L.control.layers({}, overlays).addTo(map);
      }
    </script>
  </head>
  <body onload="onload();">
    <div id="map"></div>
  </body>
</html>